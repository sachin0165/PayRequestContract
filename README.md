# Payment Request Contract

Sending payment invoices and get payment using mainstream payment processors like PayPal has restrictions like it is not available in some countries. But using our contract, anyone can send payment seamlessly. A user can create a request by providing basic details including the recipient address. A recipient checks a payment request and pays for those requests.

For payment, we have used our custom token. The token details need to pass while deploying the contract.

## Contract Deployment
Example

```

curl --location --request POST 'http://localhost:38223/api/SmartContractWallet/create' \
--header 'Content-Type: application/json' \
--data-raw '{
    "amount": "0",
    "contractCode": "4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C01020062F821820000000000000000E00022200B013000001800000002000000000000F2360000002000000040000000000010002000000002000004000000000000000400000000000000006000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000A03600004F000000000000000000000000000000000000000000000000000000004000000C000000843600001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000F8160000002000000018000000020000000000000000000000000000200000602E72656C6F6300000C0000000040000000020000001A0000000000000000000000000000400000420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D436000000000000480000000200050088260000FC0F000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001330030055000000000000000203280600000A0202280700000A6F0800000A28120000060204280700000602052805000006020E042803000006021E280B000006020E0528140000060202280700000A6F0800000A02280600000628090000062A4602280900000A72010000706F0A00000A2A4A02280900000A7201000070036F0B00000A2A4602280900000A720F0000706F0A00000A2A4A02280900000A720F000070036F0B00000A2A4602280900000A72190000706F0C00000A2A4A02280900000A7219000070036F0D00000A2A7202280900000A7231000070038C08000001280E00000A6F0C00000A2A7602280900000A7231000070038C08000001280E00000A046F0D00000A2A4602280900000A72490000706F0F00000A2A4A02280900000A7249000070036F1000000A2A13300400A600000001000011042D34021201FE1503000002120102280700000A6F0800000A7D010000041201037D020000041201166A7D0300000407280100002B172A0202280700000A6F0800000A28080000060A06043402162A0202280700000A6F0800000A0604DB280900000602030203280800000604D72809000006021201FE1503000002120102280700000A6F0800000A7D010000041201037D020000041201047D0300000407280100002B172A000013300500AA00000002000011052D2A021202FE15030000021202037D010000041202047D020000041202166A7D0300000408280100002B172A020302280700000A6F0800000A28100000060A020328080000060B0605370407053402162A020302280700000A6F0800000A0605DB280F00000602030705DB280900000602040204280800000605D72809000006021202FE15030000021202037D010000041202047D020000041202057D0300000408280100002B172A00001330040065000000030000110202280700000A6F0800000A032810000006042E02162A0202280700000A6F0800000A0305280F000006021200FE1504000002120002280700000A6F0800000A7D040000041200037D050000041200057D070000041200047D0600000406280200002B172A8E02280900000A725B000070038C08000001048C08000001281200000A056F0D00000A2A8A02280900000A725B000070038C08000001048C08000001281200000A6F0C00000A2A4602280900000A727F0000706F1300000A2A4A02280900000A727F000070036F1400000A2A4602280900000A728B0000706F0C00000A2A4A02280900000A728B000070036F0D00000A2A7602280900000A72A1000070038C10000001280E00000A046F0300002B2A7202280900000A72A1000070038C10000001280E00000A6F0400002B2A8A0202281100000602280700000A6F0800000A281700000A72C7000070281800000A2A1330030041000000040000110228170000060228130000060A02032814000006021201FE150600000212010228110000067D0F0000041201067D100000041201037D1100000407280500002B2A00000013300300B40000000500001102020328160000067B0800000416FE0172FB000070281800000A0202280700000A6F0800000A05281900000A725F010070281800000A1202FE15050000021202037D08000004120202280700000A6F0800000A7D090000041202057D0A0000041202047D0C00000412020E047D0B00000412020E057D0E0000041202167D0D000004080A020306281500000602022811000006022813000006280C0000060B020772AD010070281800000A0206280600002B172A13300300A200000006000011020328160000060A02067B0800000416FE0372D7010070281800000A02067B0A00000402280700000A6F0800000A281700000A7217020070281800000A02067B0E00000404FE037235020070281800000A02067B0D00000416FE017265020070281800000A02067B09000004067B0B000004280C0000060B020772A7020070281800000A1200187D0D00000402067B080000040628150000060206280600002B172A0000133003006F00000007000011020328160000060A02067B0800000416FE0372D7010070281800000A02067B0D00000416FE0172C7020070281800000A02067B0900000402280700000A6F0800000A281700000A7209030070281800000A1200177D0D00000402067B080000040628150000060206280600002B172A0042534A4201000100000000000C00000076342E302E33303331390000000005006C000000C8050000237E000034060000BC04000023537472696E677300000000F00A00004C030000235553003C0E00001000000023475549440000004C0E0000B001000023426C6F620000000000000002000001571DA201090A000000FA013300160000010000001000000007000000150000001B0000002700000019000000030000000A0000000700000001000000050000000A0000000100000002000000050000000600000000002A0201000000000006007901EB020600B801EB0206006501D8020F000B0300000A00A80181030A00AD0381030A002D0181030A00710381030600190159020A00990181030600720259020A00E10081030A00540181030600F10159020600BB03590206000E0059020000000029000000000001000100010010002D0400001900010001000A01100012020000250001001C000A01100006020000250004001C000A0110004E040000250008001C000A011000F801000025000F001C0002010000980300002D0012001C0006006802DB0006009702DB000600E703DF000600C602DB000600A802DB000600D603DF000600E703DF0006005100E20006003203DB0006005703DB000600E703DF0006007702E50006009F03E80006009204DF000600C602DB0006008B00DF000600DA00DF0006063200E80056805E00EB0056805400EB0056806600EB005020000000008618D202EF000100B1200000000086083C02F9000600C3200000000081084702FD000600D620000000008608F600F9000700E820000000008108FF00FD000700FB200000000086086604020108000D2100000000810876040601080020210000000086006B000B0109003D21000000008100760011010A005B210000000086001A0318010C006D2100000000810026031C010C0080210000000086008F0221010D003422000000008600600228010F00EC22000000008600DC01310112005D230000000081001E02390115008123000000008600810042011800A423000000008608B8021B001A00B623000000008108C2024A011A00C923000000008608920002011B00DB23000000008108A10006011B00EE230000000081002A0450011C000C24000000008600180457011E002924000000008100560406001F004C24000000008600B00006011F009C24000000008600FC035D0120005C250000000086004B04670125000C260000000086000A046D01270000000100410100000200860400000300080100000400520200000500CF0000000100D60100000100D60100000100D60100000100790300000100790300000200D60100000100D601000001009A0200000200EE03000001006D02000002009A0200000300EE0300000100B00200000200E00300000300EE0300000100CC0200000200B00200000300D60100000100CC0200000200B00200000100D60100000100D601000001006800000002003C0400000100680000000100C10000000100680000000200830200000300680300000400EE03000005009904000001006800000002000D010000010068000900D20201001100D20206001900D2020A002900D20206005100D20206003100D20210003100EA00160061009D021B003100230120006900E40125006900EE012A0069001500300069001F0035007100A6033B0069000100410069000B00460031001A0252007100A6036F0069004103760069004C037C006900CC0383006900C20390004100A00497003100F5039F004100AC04970008004C00CC0008005000D10008005400D60021002B00D1002E000B007F012E00130088012E001B00A70141002B00D10043002300D10081002B00D100A1002B00D10001012B00D100E1012B00D1004C005E006500A500B000B800BE000200010000004B02720100000301720100007A0476010000C6027A010000C4007601020002000300010003000300020004000500010005000500020006000700010007000700020011000900010012000900020013000B00010014000B00048000000000000000000000000000000000AD030000040000000000000000000000C3003A0000000000020000000000000000000000000081030000000003000200040002000500020006000200070002002300590023006A002B008B002D008B002300AB0023008B00000000000047657455496E7433320053657455496E7433320047657455496E7436340053657455496E743634003C4D6F64756C653E0076616C75655F5F0053797374656D2E507269766174652E436F72654C69620049640043616E63656C6C6564004372656174656400506169640047657442616C616E63650053657442616C616E636500416C6C6F77616E6365004F6C64466565006765745F53657276696365466565007365745F536572766963654665650052657669736553657276696365466565006E6577536572766963654665650073657276696365466565004E657746656500494D657373616765006765745F4D657373616765006765745F4E616D65007365745F4E616D65006E616D650063757272656E7454696D650056616C756554797065006765745F53746174650049536D617274436F6E7472616374537461746500736D617274436F6E74726163745374617465004950657273697374656E7453746174650044656275676761626C6541747472696275746500436F6D70696C6174696F6E52656C61786174696F6E7341747472696275746500496E646578417474726962757465004465706C6F794174747269627574650052756E74696D65436F6D7061746962696C6974794174747269627574650076616C756500417070726F766500476574537472696E6700536574537472696E6700536572766963654665654C6F6700417070726F76616C4C6F67005472616E736665724C6F6700536574417070726F76616C00536D617274436F6E74726163742E646C6C006765745F53796D626F6C007365745F53796D626F6C0073796D626F6C0053797374656D005472616E7366657246726F6D0066726F6D00456E756D004465736372697074696F6E006465736372697074696F6E005472616E73666572546F00746F006765745F53656E646572005370656E646572007370656E646572006765745F4F776E6572007365745F4F776E6572006F776E6572002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F64657300476574446563696D616C7300536574446563696D616C730043726561746F72416464726573730047657441646472657373005365744164647265737300526563697069656E744164647265737300726563697069656E7441646472657373006164647265737300537472617469732E536D617274436F6E747261637473005061796D656E7453746174757300466F726D617400536D617274436F6E7472616374004F626A6563740047657453747275637400536574537472756374004F6C64416D6F756E740063757272656E74416D6F756E7400616D6F756E740041737365727400437265617465526571756573740043616E63656C52657175657374004765745061796D656E7452657175657374005365745061796D656E7452657175657374007061796D656E7452657175657374005061795265717565737400456E737572654F776E65724F6E6C79006765745F546F74616C537570706C79007365745F546F74616C537570706C7900746F74616C537570706C790045787069727900657870697279006F705F457175616C697479006F705F496E657175616C697479000000000D530079006D0062006F006C0000094E0061006D006500001754006F00740061006C0053007500700070006C0079000017420061006C0061006E00630065003A007B0030007D00001144006500630069006D0061006C007300002341006C006C006F00770061006E00630065003A007B0030007D003A007B0031007D00000B4F0077006E00650072000015530065007200760069006300650046006500650000255000610079006D0065006E00740052006500710075006500730074003A007B0030007D00003354006800650020006D006500740068006F00640020006900730020006F0077006E006500720020006F006E006C0079002E0000635000610079006D0065006E00740020007200650071007500650073007400200069007300200061006C00720065006100640079002000700072006500730065006E00740020007700690074006800200067006900760065006E002000490064002E00004D52006500630069007000690065006E007400200061006400640072006500730073002000730068006F0075006C006400200062006500200064006900660066006500720065006E0074002E00002946006500650020007400720061006E00730066006500720020006600610069006C00650064002E00003F5000610079006D0065006E0074002000720065007100750065007300740020006900730020006E006F0074002000700072006500730065006E0074002E00001D49006E00760061006C00690064002000700061007900650072002E00002F54006800650020007200650071007500650073007400200069007300200065007800700069007200650064002E000041540068006500200072006500710075006500730074002000690073002000700061006900640020006F0072002000630061006E00630065006C00650064002E00001F5000610079006D0065006E00740020006600610069006C00650064002E0000414F006E006C00790020006300720065006100740065006400200072006500710075006500730074002000630061006E002000630061006E00630065006C002E0000414F006E006C007900200072006500710075006500730074002000630072006500610074006F0072002000630061006E002000630061006E00630065006C002E00000034020B696A840D4EA04402D7D72949E20004200101080320000105200101111105200101121D0420001231042000112104200012350420010E0E052002010E0E0420010B0E052002010E0B0500020E0E1C042001090E052002010E090507020B110C06300101011E00040A01110C0607030B0B110C0407011110040A0111100600030E0E1C1C05200111210E062002010E112107300102010E1E00040A011114063001011E000E070002021121112105200201020E0507020B1118040A01111807070311140211140507021114020407011114087CEC85D7BEA7798E0400000000040100000004020000000306112102060B02060902060E0206080306111C09200501121D0B0E0E0B0320000E042001010E0320000B042001010B0520010B11210620020111210B0320000904200101090620020211210B08200302112111210B0720030211210B0B08200301112111210B0720020B112111210520010111210620020109111405200111140909200502090E11210B0B05200202090B04200102090328000E0328000B04280011210801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F77730108010002000000000000000000000000000000000010000000000000000000000000000000C83600000000000000000000E2360000002000000000000000000000000000000000000000000000D4360000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF2500200010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000F43600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "password": "password",
    "sender": "PXpkVm93fQGjE9EVtM41dRLPBZMgGuiyVz",
    "walletName": "cirrusdev",
    "accountName": "account 0",
    "outpoints": null,
    "feeAmount": "0.001",
    "gasPrice": 100,
    "gasLimit": 100000,
    "parameters": [
        "7#1000000000000",
        "4#Payment Token",
        "4#PYT",
        "7#10000000"
    ]
}'

```

Before using the system, all participants should have some CRS tokens in their wallets. Otherwise, the transaction will give an error.

## Main Contract Methods

### Create Request

A user can create a request for the payment with the following parameters. A request creator needs to pay a small amount of service fee to the contract owner.

Parameters Details

| Parameter | Description|
| ----------- | ----------- |
| Id | Request Id |
| Description | Request Description. Purpose of the payment|
| RecipientAddress| Wallet address from whom you want to collect payment.|
| Amount| Amount to receive|
| Expiry| When request will be expired. (UnixTimeStamp)|


### Cancel Request

A request creator can cancel the request. 

Parameters Details


| Parameter | Description|
| ----------- | ----------- |
| Id | Request Id |

### Pay Request 

This method sends amount to the creator. 

| Parameter | Description|
| ----------- | ----------- |
| Id | Request Id |
| CurrentTime | Current Time in UnixTimeStamp|


### Further Goals

- Enhance SmartContract with CRS tokens.
- Add Conditional payments using oracles. Like user can send payment with the condition; if bitcoin price > 50K release this payment to the Recipient.
